import{r as a,i as v,o as N,p as y,B as i,j as e}from"./index-C2fSal1z.js";import{u as P,c as S,a as f,h}from"./handleClasses-BJ5bTZUO.js";const I=()=>{const[r,n]=a.useState(!1),x=v(),[g,{isSuccess:t,isError:d,isLoading:j,error:o}]=N(),[p,{isSuccess:c,isError:l,isLoading:b,error:m}]=y(),s=P({initialValues:{username:"",otp:""},validationSchema:S({username:f(),otp:f()}),onSubmit:(u,{resetForm:E})=>{r?p(u):g(u)}});return a.useEffect(()=>{t&&(s.setFieldValue("otp",""),n(!0),i.success("Please Verify OTP , sent on your registered email and mobile number"))},[t]),a.useEffect(()=>{c&&x("/admin")},[c]),a.useEffect(()=>{l&&(n(!1),i.error(m.data?m.data.message:"Something went wrong"))},[l]),a.useEffect(()=>{d&&i.error(o.data?o.data.message:"Something Went Wrong")},[d]),j||b?e.jsxs("div",{className:" text-center my-5",children:["Please Wait... ",e.jsx("div",{className:"spinner-border text-primary"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container ",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card my-3 rounded-top-5","data-bs-theme":"dark",children:[e.jsx("div",{className:"card-header bg-danger fs-4 text-center rounded-pill ",children:"Admin Login"}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:s.handleSubmit,children:[r?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"form-label",children:"OTP"}),e.jsx("input",{...s.getFieldProps("otp"),type:"text",className:h("otp",s),placeholder:"Enter OTP"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.username})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{...s.getFieldProps("username"),type:"text",className:h("username",s),placeholder:"Enter Your Email or Mobile No."}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.username})]}),e.jsx("button",{type:"submit",className:"btn btn-warning w-100 mt-3",children:r?"Verify OTP":"Login"}),r?e.jsx("div",{className:"text-center my-1",children:" Enter OTP in : 60 seconds  "}):e.jsx("div",{className:"text-center my-1",children:"Timeout, Please Retry"})]})})]})})})})})};export{I as default};
