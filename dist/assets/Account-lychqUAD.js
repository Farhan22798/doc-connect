import{g as E,h as F,r as u,j as e,B as x,i as I,k as C,u as A}from"./index-qh2YBMRJ.js";import{u as D,c as w,a as d,h}from"./handleClasses-AcZrC0U9.js";const L=()=>{var o,n,b,p,N,v,T,y,g;const[l,{data:s}]=E(),[f]=F(),[c,j]=u.useState(""),[r,a]=u.useState({startTime:"",endTime:""}),i=D({enableReinitialize:!0,initialValues:{startTime:r.startTime||"",endTime:r.endTime||""},validationSchema:w({startTime:d().required("Set Start Time"),endTime:d().required("Set End Time")}),onSubmit:async(t,{resetForm:m})=>{var S,k;if(!c){x.error("Please select a day");return}try{await f({did:(k=(S=s==null?void 0:s.result)==null?void 0:S[0])==null?void 0:k._id,day:c,startTime:t.startTime,endTime:t.endTime}).unwrap(),x.success(`Time updated for ${c}`),m(),j(""),a({startTime:"",endTime:""})}catch{x.error("Failed to update time")}}});return u.useEffect(()=>{l()},[]),e.jsx("div",{className:"container mt-5",children:e.jsx("form",{onSubmit:i.handleSubmit,children:e.jsxs("div",{className:"card shadow-lg bg-secondary text-light rounded-4 p-4",children:[e.jsxs("div",{className:"card-header text-center d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"fw-bold",children:["Welcome,  ",((n=(o=s==null?void 0:s.result)==null?void 0:o[0])==null?void 0:n.doctorName)||"Doctor"]}),e.jsxs("h3",{className:"fw-light",children:[" ",((p=(b=s==null?void 0:s.result)==null?void 0:b[0])==null?void 0:p.spec)||"Doctor"]})]}),e.jsx("img",{className:"rounded rounded-pill",src:(N=s==null?void 0:s.result[0])==null?void 0:N.hero,height:90})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive mb-4",children:e.jsxs("table",{className:"table table-bordered table-striped text-center text-light",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Day"}),e.jsx("th",{children:"Start Time"}),e.jsx("th",{children:"End Time"})]})}),e.jsx("tbody",{children:((T=(v=s==null?void 0:s.result)==null?void 0:v[0])==null?void 0:T.schedule)&&Object.entries(s.result[0].schedule).map(([t,m])=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx("td",{children:m.startTime||"N/A"}),e.jsx("td",{children:m.endTime||"N/A"})]},t))})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"Select Day"}),e.jsxs("select",{className:"form-control",value:c,onChange:t=>j(t.target.value),children:[e.jsx("option",{value:"",children:"Choose a day"}),Object.keys(((g=(y=s==null?void 0:s.result)==null?void 0:y[0])==null?void 0:g.schedule)||{}).map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-bold",children:"Start Time"}),e.jsx("input",{...i.getFieldProps("startTime"),type:"time",className:"form-control"}),i.errors.startTime&&i.touched.startTime&&e.jsx("div",{className:"text-warning",children:i.errors.startTime})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-bold",children:"End Time"}),e.jsx("input",{...i.getFieldProps("endTime"),type:"time",className:"form-control"}),i.errors.endTime&&i.touched.endTime&&e.jsx("div",{className:"text-warning",children:i.errors.endTime})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"submit",className:"btn btn-warning w-50 fs-5",children:"Update Timings"})})]})]})})})},q=()=>{I();const[l,{isSuccess:s,isError:f,isLoading:c,error:j}]=C(),r=D({initialValues:{address:"",city:"",certificate:"",hero:""},validationSchema:w({address:d().required("Enter address"),city:d().required("Enter city"),certificate:d().required("Enter certificate"),hero:d().required("Enter hero")}),onSubmit:(a,{resetForm:i})=>{const o=new FormData;for(const n in a)o.append(n,a[n]);l(o),i()}});return u.useEffect(()=>{s&&x.success("Info Update Success")},[s]),c?e.jsxs("div",{className:" text-center my-5",children:["Please Wait... ",e.jsx("div",{className:"spinner-border text-primary"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card my-5","data-bs-theme":"dark",children:[e.jsx("div",{className:"card-header text-center ",children:"Doctor Info"}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"Address"}),e.jsx("input",{...r.getFieldProps("address"),type:"text",className:h("address",r),id:"address",placeholder:"Enter Your address"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:r.errors.address})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"form-label",children:"City"}),e.jsx("input",{...r.getFieldProps("city"),type:"text",className:h("city",r),id:"city",placeholder:"Enter Your city"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:r.errors.city})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"certificate",className:"form-label",children:"Degree / Certificate  "}),e.jsx("input",{onChange:a=>r.setFieldValue("certificate",a.target.files[0]),type:"file",className:h("certificate",r),id:"certificate",placeholder:"Enter Your certificate"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:r.errors.certificate})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hero",className:"form-label",children:"Doctor Image"}),e.jsx("input",{onChange:a=>r.setFieldValue("hero",a.target.files[0]),type:"file",className:h("hero",r),id:"hero",placeholder:"Enter Your hero"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:r.errors.hero})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Add Details"})]})})]})})})})})},Y=()=>{const{doctor:l}=A(s=>s.auth);return e.jsx(e.Fragment,{children:l.infoComplete?e.jsx(L,{}):e.jsx(q,{})})};export{Y as default};
